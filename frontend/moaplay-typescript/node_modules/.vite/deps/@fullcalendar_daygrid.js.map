{"version":3,"file":"@fullcalendar_daygrid.js","names":["createRef","createElement","Fragment"],"sources":["../../@fullcalendar/daygrid/internal.js","../../@fullcalendar/daygrid/index.js"],"sourcesContent":["import { DateComponent, getStickyHeaderDates, ViewContainer, SimpleScrollGrid, getStickyFooterScrollbar, renderScrollShim, createFormatter, BaseComponent, StandardEvent, buildSegTimeText, EventContainer, getSegAnchorAttrs, memoize, MoreLinkContainer, getSegMeta, getUniqueDomId, setRef, DayCellContainer, WeekNumberContainer, buildNavLinkAttrs, hasCustomDayCellContent, addMs, intersectRanges, addDays, SegHierarchy, buildEntryKey, intersectSpans, RefMap, sortEventSegs, isPropsEqual, buildEventRangeKey, BgEvent, renderFill, PositionCache, NowTimer, formatIsoMonthStr, formatDayString, Slicer, DayHeader, DaySeriesModel, DayTableModel, DateProfileGenerator, addWeeks, diffWeeks, injectStyles } from '@fullcalendar/core/internal.js';\r\nimport { createRef, createElement, Fragment } from '@fullcalendar/core/preact.js';\r\n\r\n/* An abstract class for the daygrid views, as well as month view. Renders one or more rows of day cells.\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n// It is a manager for a Table subcomponent, which does most of the heavy lifting.\r\n// It is responsible for managing width/height.\r\nclass TableView extends DateComponent {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.headerElRef = createRef();\r\n    }\r\n    renderSimpleLayout(headerRowContent, bodyContent) {\r\n        let { props, context } = this;\r\n        let sections = [];\r\n        let stickyHeaderDates = getStickyHeaderDates(context.options);\r\n        if (headerRowContent) {\r\n            sections.push({\r\n                type: 'header',\r\n                key: 'header',\r\n                isSticky: stickyHeaderDates,\r\n                chunk: {\r\n                    elRef: this.headerElRef,\r\n                    tableClassName: 'fc-col-header',\r\n                    rowContent: headerRowContent,\r\n                },\r\n            });\r\n        }\r\n        sections.push({\r\n            type: 'body',\r\n            key: 'body',\r\n            liquid: true,\r\n            chunk: { content: bodyContent },\r\n        });\r\n        return (createElement(ViewContainer, { elClasses: ['fc-daygrid'], viewSpec: context.viewSpec },\r\n            createElement(SimpleScrollGrid, { liquid: !props.isHeightAuto && !props.forPrint, collapsibleWidth: props.forPrint, cols: [] /* TODO: make optional? */, sections: sections })));\r\n    }\r\n    renderHScrollLayout(headerRowContent, bodyContent, colCnt, dayMinWidth) {\r\n        let ScrollGrid = this.context.pluginHooks.scrollGridImpl;\r\n        if (!ScrollGrid) {\r\n            throw new Error('No ScrollGrid implementation');\r\n        }\r\n        let { props, context } = this;\r\n        let stickyHeaderDates = !props.forPrint && getStickyHeaderDates(context.options);\r\n        let stickyFooterScrollbar = !props.forPrint && getStickyFooterScrollbar(context.options);\r\n        let sections = [];\r\n        if (headerRowContent) {\r\n            sections.push({\r\n                type: 'header',\r\n                key: 'header',\r\n                isSticky: stickyHeaderDates,\r\n                chunks: [{\r\n                        key: 'main',\r\n                        elRef: this.headerElRef,\r\n                        tableClassName: 'fc-col-header',\r\n                        rowContent: headerRowContent,\r\n                    }],\r\n            });\r\n        }\r\n        sections.push({\r\n            type: 'body',\r\n            key: 'body',\r\n            liquid: true,\r\n            chunks: [{\r\n                    key: 'main',\r\n                    content: bodyContent,\r\n                }],\r\n        });\r\n        if (stickyFooterScrollbar) {\r\n            sections.push({\r\n                type: 'footer',\r\n                key: 'footer',\r\n                isSticky: true,\r\n                chunks: [{\r\n                        key: 'main',\r\n                        content: renderScrollShim,\r\n                    }],\r\n            });\r\n        }\r\n        return (createElement(ViewContainer, { elClasses: ['fc-daygrid'], viewSpec: context.viewSpec },\r\n            createElement(ScrollGrid, { liquid: !props.isHeightAuto && !props.forPrint, forPrint: props.forPrint, collapsibleWidth: props.forPrint, colGroups: [{ cols: [{ span: colCnt, minWidth: dayMinWidth }] }], sections: sections })));\r\n    }\r\n}\r\n\r\nfunction splitSegsByRow(segs, rowCnt) {\r\n    let byRow = [];\r\n    for (let i = 0; i < rowCnt; i += 1) {\r\n        byRow[i] = [];\r\n    }\r\n    for (let seg of segs) {\r\n        byRow[seg.row].push(seg);\r\n    }\r\n    return byRow;\r\n}\r\nfunction splitSegsByFirstCol(segs, colCnt) {\r\n    let byCol = [];\r\n    for (let i = 0; i < colCnt; i += 1) {\r\n        byCol[i] = [];\r\n    }\r\n    for (let seg of segs) {\r\n        byCol[seg.firstCol].push(seg);\r\n    }\r\n    return byCol;\r\n}\r\nfunction splitInteractionByRow(ui, rowCnt) {\r\n    let byRow = [];\r\n    if (!ui) {\r\n        for (let i = 0; i < rowCnt; i += 1) {\r\n            byRow[i] = null;\r\n        }\r\n    }\r\n    else {\r\n        for (let i = 0; i < rowCnt; i += 1) {\r\n            byRow[i] = {\r\n                affectedInstances: ui.affectedInstances,\r\n                isEvent: ui.isEvent,\r\n                segs: [],\r\n            };\r\n        }\r\n        for (let seg of ui.segs) {\r\n            byRow[seg.row].segs.push(seg);\r\n        }\r\n    }\r\n    return byRow;\r\n}\r\n\r\nconst DEFAULT_TABLE_EVENT_TIME_FORMAT = createFormatter({\r\n    hour: 'numeric',\r\n    minute: '2-digit',\r\n    omitZeroMinute: true,\r\n    meridiem: 'narrow',\r\n});\r\nfunction hasListItemDisplay(seg) {\r\n    let { display } = seg.eventRange.ui;\r\n    return display === 'list-item' || (display === 'auto' &&\r\n        !seg.eventRange.def.allDay &&\r\n        seg.firstCol === seg.lastCol && // can't be multi-day\r\n        seg.isStart && // \"\r\n        seg.isEnd // \"\r\n    );\r\n}\r\n\r\nclass TableBlockEvent extends BaseComponent {\r\n    render() {\r\n        let { props } = this;\r\n        return (createElement(StandardEvent, Object.assign({}, props, { elClasses: ['fc-daygrid-event', 'fc-daygrid-block-event', 'fc-h-event'], defaultTimeFormat: DEFAULT_TABLE_EVENT_TIME_FORMAT, defaultDisplayEventEnd: props.defaultDisplayEventEnd, disableResizing: !props.seg.eventRange.def.allDay })));\r\n    }\r\n}\r\n\r\nclass TableListItemEvent extends BaseComponent {\r\n    render() {\r\n        let { props, context } = this;\r\n        let { options } = context;\r\n        let { seg } = props;\r\n        let timeFormat = options.eventTimeFormat || DEFAULT_TABLE_EVENT_TIME_FORMAT;\r\n        let timeText = buildSegTimeText(seg, timeFormat, context, true, props.defaultDisplayEventEnd);\r\n        return (createElement(EventContainer, Object.assign({}, props, { elTag: \"a\", elClasses: ['fc-daygrid-event', 'fc-daygrid-dot-event'], elAttrs: getSegAnchorAttrs(props.seg, context), defaultGenerator: renderInnerContent, timeText: timeText, isResizing: false, isDateSelecting: false })));\r\n    }\r\n}\r\nfunction renderInnerContent(renderProps) {\r\n    return (createElement(Fragment, null,\r\n        createElement(\"div\", { className: \"fc-daygrid-event-dot\", style: { borderColor: renderProps.borderColor || renderProps.backgroundColor } }),\r\n        renderProps.timeText && (createElement(\"div\", { className: \"fc-event-time\" }, renderProps.timeText)),\r\n        createElement(\"div\", { className: \"fc-event-title\" }, renderProps.event.title || createElement(Fragment, null, \"\\u00A0\"))));\r\n}\r\n\r\nclass TableCellMoreLink extends BaseComponent {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.compileSegs = memoize(compileSegs);\r\n    }\r\n    render() {\r\n        let { props } = this;\r\n        let { allSegs, invisibleSegs } = this.compileSegs(props.singlePlacements);\r\n        return (createElement(MoreLinkContainer, { elClasses: ['fc-daygrid-more-link'], dateProfile: props.dateProfile, todayRange: props.todayRange, allDayDate: props.allDayDate, moreCnt: props.moreCnt, allSegs: allSegs, hiddenSegs: invisibleSegs, alignmentElRef: props.alignmentElRef, alignGridTop: props.alignGridTop, extraDateSpan: props.extraDateSpan, popoverContent: () => {\r\n                let isForcedInvisible = (props.eventDrag ? props.eventDrag.affectedInstances : null) ||\r\n                    (props.eventResize ? props.eventResize.affectedInstances : null) ||\r\n                    {};\r\n                return (createElement(Fragment, null, allSegs.map((seg) => {\r\n                    let instanceId = seg.eventRange.instance.instanceId;\r\n                    return (createElement(\"div\", { className: \"fc-daygrid-event-harness\", key: instanceId, style: {\r\n                            visibility: isForcedInvisible[instanceId] ? 'hidden' : '',\r\n                        } }, hasListItemDisplay(seg) ? (createElement(TableListItemEvent, Object.assign({ seg: seg, isDragging: false, isSelected: instanceId === props.eventSelection, defaultDisplayEventEnd: false }, getSegMeta(seg, props.todayRange)))) : (createElement(TableBlockEvent, Object.assign({ seg: seg, isDragging: false, isResizing: false, isDateSelecting: false, isSelected: instanceId === props.eventSelection, defaultDisplayEventEnd: false }, getSegMeta(seg, props.todayRange))))));\r\n                })));\r\n            } }));\r\n    }\r\n}\r\nfunction compileSegs(singlePlacements) {\r\n    let allSegs = [];\r\n    let invisibleSegs = [];\r\n    for (let placement of singlePlacements) {\r\n        allSegs.push(placement.seg);\r\n        if (!placement.isVisible) {\r\n            invisibleSegs.push(placement.seg);\r\n        }\r\n    }\r\n    return { allSegs, invisibleSegs };\r\n}\r\n\r\nconst DEFAULT_WEEK_NUM_FORMAT = createFormatter({ week: 'narrow' });\r\nclass TableCell extends DateComponent {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.rootElRef = createRef();\r\n        this.state = {\r\n            dayNumberId: getUniqueDomId(),\r\n        };\r\n        this.handleRootEl = (el) => {\r\n            setRef(this.rootElRef, el);\r\n            setRef(this.props.elRef, el);\r\n        };\r\n    }\r\n    render() {\r\n        let { context, props, state, rootElRef } = this;\r\n        let { options, dateEnv } = context;\r\n        let { date, dateProfile } = props;\r\n        // TODO: memoize this?\r\n        const isMonthStart = props.showDayNumber &&\r\n            shouldDisplayMonthStart(date, dateProfile.currentRange, dateEnv);\r\n        return (createElement(DayCellContainer, { elTag: \"td\", elRef: this.handleRootEl, elClasses: [\r\n                'fc-daygrid-day',\r\n                ...(props.extraClassNames || []),\r\n            ], elAttrs: Object.assign(Object.assign(Object.assign({}, props.extraDataAttrs), (props.showDayNumber ? { 'aria-labelledby': state.dayNumberId } : {})), { role: 'gridcell' }), defaultGenerator: renderTopInner, date: date, dateProfile: dateProfile, todayRange: props.todayRange, showDayNumber: props.showDayNumber, isMonthStart: isMonthStart, extraRenderProps: props.extraRenderProps }, (InnerContent, renderProps) => (createElement(\"div\", { ref: props.innerElRef, className: \"fc-daygrid-day-frame fc-scrollgrid-sync-inner\", style: { minHeight: props.minHeight } },\r\n            props.showWeekNumber && (createElement(WeekNumberContainer, { elTag: \"a\", elClasses: ['fc-daygrid-week-number'], elAttrs: buildNavLinkAttrs(context, date, 'week'), date: date, defaultFormat: DEFAULT_WEEK_NUM_FORMAT })),\r\n            !renderProps.isDisabled &&\r\n                (props.showDayNumber || hasCustomDayCellContent(options) || props.forceDayTop) ? (createElement(\"div\", { className: \"fc-daygrid-day-top\" },\r\n                createElement(InnerContent, { elTag: \"a\", elClasses: [\r\n                        'fc-daygrid-day-number',\r\n                        isMonthStart && 'fc-daygrid-month-start',\r\n                    ], elAttrs: Object.assign(Object.assign({}, buildNavLinkAttrs(context, date)), { id: state.dayNumberId }) }))) : props.showDayNumber ? (\r\n            // for creating correct amount of space (see issue #7162)\r\n            createElement(\"div\", { className: \"fc-daygrid-day-top\", style: { visibility: 'hidden' } },\r\n                createElement(\"a\", { className: \"fc-daygrid-day-number\" }, \"\\u00A0\"))) : undefined,\r\n            createElement(\"div\", { className: \"fc-daygrid-day-events\", ref: props.fgContentElRef },\r\n                props.fgContent,\r\n                createElement(\"div\", { className: \"fc-daygrid-day-bottom\", style: { marginTop: props.moreMarginTop } },\r\n                    createElement(TableCellMoreLink, { allDayDate: date, singlePlacements: props.singlePlacements, moreCnt: props.moreCnt, alignmentElRef: rootElRef, alignGridTop: !props.showDayNumber, extraDateSpan: props.extraDateSpan, dateProfile: props.dateProfile, eventSelection: props.eventSelection, eventDrag: props.eventDrag, eventResize: props.eventResize, todayRange: props.todayRange }))),\r\n            createElement(\"div\", { className: \"fc-daygrid-day-bg\" }, props.bgContent)))));\r\n    }\r\n}\r\nfunction renderTopInner(props) {\r\n    return props.dayNumberText || createElement(Fragment, null, \"\\u00A0\");\r\n}\r\nfunction shouldDisplayMonthStart(date, currentRange, dateEnv) {\r\n    const { start: currentStart, end: currentEnd } = currentRange;\r\n    const currentEndIncl = addMs(currentEnd, -1);\r\n    const currentFirstYear = dateEnv.getYear(currentStart);\r\n    const currentFirstMonth = dateEnv.getMonth(currentStart);\r\n    const currentLastYear = dateEnv.getYear(currentEndIncl);\r\n    const currentLastMonth = dateEnv.getMonth(currentEndIncl);\r\n    // spans more than one month?\r\n    return !(currentFirstYear === currentLastYear && currentFirstMonth === currentLastMonth) &&\r\n        Boolean(\r\n        // first date in current view?\r\n        date.valueOf() === currentStart.valueOf() ||\r\n            // a month-start that's within the current range?\r\n            (dateEnv.getDay(date) === 1 && date.valueOf() < currentEnd.valueOf()));\r\n}\r\n\r\nfunction generateSegKey(seg) {\r\n    return seg.eventRange.instance.instanceId + ':' + seg.firstCol;\r\n}\r\nfunction generateSegUid(seg) {\r\n    return generateSegKey(seg) + ':' + seg.lastCol;\r\n}\r\nfunction computeFgSegPlacement(segs, // assumed already sorted\r\ndayMaxEvents, dayMaxEventRows, strictOrder, segHeights, maxContentHeight, cells) {\r\n    let hierarchy = new DayGridSegHierarchy((segEntry) => {\r\n        // TODO: more DRY with generateSegUid\r\n        let segUid = segs[segEntry.index].eventRange.instance.instanceId +\r\n            ':' + segEntry.span.start +\r\n            ':' + (segEntry.span.end - 1);\r\n        // if no thickness known, assume 1 (if 0, so small it always fits)\r\n        return segHeights[segUid] || 1;\r\n    });\r\n    hierarchy.allowReslicing = true;\r\n    hierarchy.strictOrder = strictOrder;\r\n    if (dayMaxEvents === true || dayMaxEventRows === true) {\r\n        hierarchy.maxCoord = maxContentHeight;\r\n        hierarchy.hiddenConsumes = true;\r\n    }\r\n    else if (typeof dayMaxEvents === 'number') {\r\n        hierarchy.maxStackCnt = dayMaxEvents;\r\n    }\r\n    else if (typeof dayMaxEventRows === 'number') {\r\n        hierarchy.maxStackCnt = dayMaxEventRows;\r\n        hierarchy.hiddenConsumes = true;\r\n    }\r\n    // create segInputs only for segs with known heights\r\n    let segInputs = [];\r\n    let unknownHeightSegs = [];\r\n    for (let i = 0; i < segs.length; i += 1) {\r\n        let seg = segs[i];\r\n        let segUid = generateSegUid(seg);\r\n        let eventHeight = segHeights[segUid];\r\n        if (eventHeight != null) {\r\n            segInputs.push({\r\n                index: i,\r\n                span: {\r\n                    start: seg.firstCol,\r\n                    end: seg.lastCol + 1,\r\n                },\r\n            });\r\n        }\r\n        else {\r\n            unknownHeightSegs.push(seg);\r\n        }\r\n    }\r\n    let hiddenEntries = hierarchy.addSegs(segInputs);\r\n    let segRects = hierarchy.toRects();\r\n    let { singleColPlacements, multiColPlacements, leftoverMargins } = placeRects(segRects, segs, cells);\r\n    let moreCnts = [];\r\n    let moreMarginTops = [];\r\n    // add segs with unknown heights\r\n    for (let seg of unknownHeightSegs) {\r\n        multiColPlacements[seg.firstCol].push({\r\n            seg,\r\n            isVisible: false,\r\n            isAbsolute: true,\r\n            absoluteTop: 0,\r\n            marginTop: 0,\r\n        });\r\n        for (let col = seg.firstCol; col <= seg.lastCol; col += 1) {\r\n            singleColPlacements[col].push({\r\n                seg: resliceSeg(seg, col, col + 1, cells),\r\n                isVisible: false,\r\n                isAbsolute: false,\r\n                absoluteTop: 0,\r\n                marginTop: 0,\r\n            });\r\n        }\r\n    }\r\n    // add the hidden entries\r\n    for (let col = 0; col < cells.length; col += 1) {\r\n        moreCnts.push(0);\r\n    }\r\n    for (let hiddenEntry of hiddenEntries) {\r\n        let seg = segs[hiddenEntry.index];\r\n        let hiddenSpan = hiddenEntry.span;\r\n        multiColPlacements[hiddenSpan.start].push({\r\n            seg: resliceSeg(seg, hiddenSpan.start, hiddenSpan.end, cells),\r\n            isVisible: false,\r\n            isAbsolute: true,\r\n            absoluteTop: 0,\r\n            marginTop: 0,\r\n        });\r\n        for (let col = hiddenSpan.start; col < hiddenSpan.end; col += 1) {\r\n            moreCnts[col] += 1;\r\n            singleColPlacements[col].push({\r\n                seg: resliceSeg(seg, col, col + 1, cells),\r\n                isVisible: false,\r\n                isAbsolute: false,\r\n                absoluteTop: 0,\r\n                marginTop: 0,\r\n            });\r\n        }\r\n    }\r\n    // deal with leftover margins\r\n    for (let col = 0; col < cells.length; col += 1) {\r\n        moreMarginTops.push(leftoverMargins[col]);\r\n    }\r\n    return { singleColPlacements, multiColPlacements, moreCnts, moreMarginTops };\r\n}\r\n// rects ordered by top coord, then left\r\nfunction placeRects(allRects, segs, cells) {\r\n    let rectsByEachCol = groupRectsByEachCol(allRects, cells.length);\r\n    let singleColPlacements = [];\r\n    let multiColPlacements = [];\r\n    let leftoverMargins = [];\r\n    for (let col = 0; col < cells.length; col += 1) {\r\n        let rects = rectsByEachCol[col];\r\n        // compute all static segs in singlePlacements\r\n        let singlePlacements = [];\r\n        let currentHeight = 0;\r\n        let currentMarginTop = 0;\r\n        for (let rect of rects) {\r\n            let seg = segs[rect.index];\r\n            singlePlacements.push({\r\n                seg: resliceSeg(seg, col, col + 1, cells),\r\n                isVisible: true,\r\n                isAbsolute: false,\r\n                absoluteTop: rect.levelCoord,\r\n                marginTop: rect.levelCoord - currentHeight,\r\n            });\r\n            currentHeight = rect.levelCoord + rect.thickness;\r\n        }\r\n        // compute mixed static/absolute segs in multiPlacements\r\n        let multiPlacements = [];\r\n        currentHeight = 0;\r\n        currentMarginTop = 0;\r\n        for (let rect of rects) {\r\n            let seg = segs[rect.index];\r\n            let isAbsolute = rect.span.end - rect.span.start > 1; // multi-column?\r\n            let isFirstCol = rect.span.start === col;\r\n            currentMarginTop += rect.levelCoord - currentHeight; // amount of space since bottom of previous seg\r\n            currentHeight = rect.levelCoord + rect.thickness; // height will now be bottom of current seg\r\n            if (isAbsolute) {\r\n                currentMarginTop += rect.thickness;\r\n                if (isFirstCol) {\r\n                    multiPlacements.push({\r\n                        seg: resliceSeg(seg, rect.span.start, rect.span.end, cells),\r\n                        isVisible: true,\r\n                        isAbsolute: true,\r\n                        absoluteTop: rect.levelCoord,\r\n                        marginTop: 0,\r\n                    });\r\n                }\r\n            }\r\n            else if (isFirstCol) {\r\n                multiPlacements.push({\r\n                    seg: resliceSeg(seg, rect.span.start, rect.span.end, cells),\r\n                    isVisible: true,\r\n                    isAbsolute: false,\r\n                    absoluteTop: rect.levelCoord,\r\n                    marginTop: currentMarginTop, // claim the margin\r\n                });\r\n                currentMarginTop = 0;\r\n            }\r\n        }\r\n        singleColPlacements.push(singlePlacements);\r\n        multiColPlacements.push(multiPlacements);\r\n        leftoverMargins.push(currentMarginTop);\r\n    }\r\n    return { singleColPlacements, multiColPlacements, leftoverMargins };\r\n}\r\nfunction groupRectsByEachCol(rects, colCnt) {\r\n    let rectsByEachCol = [];\r\n    for (let col = 0; col < colCnt; col += 1) {\r\n        rectsByEachCol.push([]);\r\n    }\r\n    for (let rect of rects) {\r\n        for (let col = rect.span.start; col < rect.span.end; col += 1) {\r\n            rectsByEachCol[col].push(rect);\r\n        }\r\n    }\r\n    return rectsByEachCol;\r\n}\r\nfunction resliceSeg(seg, spanStart, spanEnd, cells) {\r\n    if (seg.firstCol === spanStart && seg.lastCol === spanEnd - 1) {\r\n        return seg;\r\n    }\r\n    let eventRange = seg.eventRange;\r\n    let origRange = eventRange.range;\r\n    let slicedRange = intersectRanges(origRange, {\r\n        start: cells[spanStart].date,\r\n        end: addDays(cells[spanEnd - 1].date, 1),\r\n    });\r\n    return Object.assign(Object.assign({}, seg), { firstCol: spanStart, lastCol: spanEnd - 1, eventRange: {\r\n            def: eventRange.def,\r\n            ui: Object.assign(Object.assign({}, eventRange.ui), { durationEditable: false }),\r\n            instance: eventRange.instance,\r\n            range: slicedRange,\r\n        }, isStart: seg.isStart && slicedRange.start.valueOf() === origRange.start.valueOf(), isEnd: seg.isEnd && slicedRange.end.valueOf() === origRange.end.valueOf() });\r\n}\r\nclass DayGridSegHierarchy extends SegHierarchy {\r\n    constructor() {\r\n        super(...arguments);\r\n        // config\r\n        this.hiddenConsumes = false;\r\n        // allows us to keep hidden entries in the hierarchy so they take up space\r\n        this.forceHidden = {};\r\n    }\r\n    addSegs(segInputs) {\r\n        const hiddenSegs = super.addSegs(segInputs);\r\n        const { entriesByLevel } = this;\r\n        const excludeHidden = (entry) => !this.forceHidden[buildEntryKey(entry)];\r\n        // remove the forced-hidden segs\r\n        for (let level = 0; level < entriesByLevel.length; level += 1) {\r\n            entriesByLevel[level] = entriesByLevel[level].filter(excludeHidden);\r\n        }\r\n        return hiddenSegs;\r\n    }\r\n    handleInvalidInsertion(insertion, entry, hiddenEntries) {\r\n        const { entriesByLevel, forceHidden } = this;\r\n        const { touchingEntry, touchingLevel, touchingLateral } = insertion;\r\n        // the entry that the new insertion is touching must be hidden\r\n        if (this.hiddenConsumes && touchingEntry) {\r\n            const touchingEntryId = buildEntryKey(touchingEntry);\r\n            if (!forceHidden[touchingEntryId]) {\r\n                if (this.allowReslicing) {\r\n                    // split up the touchingEntry, reinsert it\r\n                    const hiddenEntry = Object.assign(Object.assign({}, touchingEntry), { span: intersectSpans(touchingEntry.span, entry.span) });\r\n                    // reinsert the area that turned into a \"more\" link (so no other entries try to\r\n                    // occupy the space) but mark it forced-hidden\r\n                    const hiddenEntryId = buildEntryKey(hiddenEntry);\r\n                    forceHidden[hiddenEntryId] = true;\r\n                    entriesByLevel[touchingLevel][touchingLateral] = hiddenEntry;\r\n                    hiddenEntries.push(hiddenEntry);\r\n                    this.splitEntry(touchingEntry, entry, hiddenEntries);\r\n                }\r\n                else {\r\n                    forceHidden[touchingEntryId] = true;\r\n                    hiddenEntries.push(touchingEntry);\r\n                }\r\n            }\r\n        }\r\n        // will try to reslice...\r\n        super.handleInvalidInsertion(insertion, entry, hiddenEntries);\r\n    }\r\n}\r\n\r\nclass TableRow extends DateComponent {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.cellElRefs = new RefMap(); // the <td>\r\n        this.frameElRefs = new RefMap(); // the fc-daygrid-day-frame\r\n        this.fgElRefs = new RefMap(); // the fc-daygrid-day-events\r\n        this.segHarnessRefs = new RefMap(); // indexed by \"instanceId:firstCol\"\r\n        this.rootElRef = createRef();\r\n        this.state = {\r\n            framePositions: null,\r\n            maxContentHeight: null,\r\n            segHeights: {},\r\n        };\r\n        this.handleResize = (isForced) => {\r\n            if (isForced) {\r\n                this.updateSizing(true); // isExternal=true\r\n            }\r\n        };\r\n    }\r\n    render() {\r\n        let { props, state, context } = this;\r\n        let { options } = context;\r\n        let colCnt = props.cells.length;\r\n        let businessHoursByCol = splitSegsByFirstCol(props.businessHourSegs, colCnt);\r\n        let bgEventSegsByCol = splitSegsByFirstCol(props.bgEventSegs, colCnt);\r\n        let highlightSegsByCol = splitSegsByFirstCol(this.getHighlightSegs(), colCnt);\r\n        let mirrorSegsByCol = splitSegsByFirstCol(this.getMirrorSegs(), colCnt);\r\n        let { singleColPlacements, multiColPlacements, moreCnts, moreMarginTops } = computeFgSegPlacement(sortEventSegs(props.fgEventSegs, options.eventOrder), props.dayMaxEvents, props.dayMaxEventRows, options.eventOrderStrict, state.segHeights, state.maxContentHeight, props.cells);\r\n        let isForcedInvisible = // TODO: messy way to compute this\r\n         (props.eventDrag && props.eventDrag.affectedInstances) ||\r\n            (props.eventResize && props.eventResize.affectedInstances) ||\r\n            {};\r\n        return (createElement(\"tr\", { ref: this.rootElRef, role: \"row\" },\r\n            props.renderIntro && props.renderIntro(),\r\n            props.cells.map((cell, col) => {\r\n                let normalFgNodes = this.renderFgSegs(col, props.forPrint ? singleColPlacements[col] : multiColPlacements[col], props.todayRange, isForcedInvisible);\r\n                let mirrorFgNodes = this.renderFgSegs(col, buildMirrorPlacements(mirrorSegsByCol[col], multiColPlacements), props.todayRange, {}, Boolean(props.eventDrag), Boolean(props.eventResize), false);\r\n                return (createElement(TableCell, { key: cell.key, elRef: this.cellElRefs.createRef(cell.key), innerElRef: this.frameElRefs.createRef(cell.key) /* FF <td> problem, but okay to use for left/right. TODO: rename prop */, dateProfile: props.dateProfile, date: cell.date, showDayNumber: props.showDayNumbers, showWeekNumber: props.showWeekNumbers && col === 0, forceDayTop: props.showWeekNumbers /* even displaying weeknum for row, not necessarily day */, todayRange: props.todayRange, eventSelection: props.eventSelection, eventDrag: props.eventDrag, eventResize: props.eventResize, extraRenderProps: cell.extraRenderProps, extraDataAttrs: cell.extraDataAttrs, extraClassNames: cell.extraClassNames, extraDateSpan: cell.extraDateSpan, moreCnt: moreCnts[col], moreMarginTop: moreMarginTops[col], singlePlacements: singleColPlacements[col], fgContentElRef: this.fgElRefs.createRef(cell.key), fgContent: ( // Fragment scopes the keys\r\n                    createElement(Fragment, null,\r\n                        createElement(Fragment, null, normalFgNodes),\r\n                        createElement(Fragment, null, mirrorFgNodes))), bgContent: ( // Fragment scopes the keys\r\n                    createElement(Fragment, null,\r\n                        this.renderFillSegs(highlightSegsByCol[col], 'highlight'),\r\n                        this.renderFillSegs(businessHoursByCol[col], 'non-business'),\r\n                        this.renderFillSegs(bgEventSegsByCol[col], 'bg-event'))), minHeight: props.cellMinHeight }));\r\n            })));\r\n    }\r\n    componentDidMount() {\r\n        this.updateSizing(true);\r\n        this.context.addResizeHandler(this.handleResize);\r\n    }\r\n    componentDidUpdate(prevProps, prevState) {\r\n        let currentProps = this.props;\r\n        this.updateSizing(!isPropsEqual(prevProps, currentProps));\r\n    }\r\n    componentWillUnmount() {\r\n        this.context.removeResizeHandler(this.handleResize);\r\n    }\r\n    getHighlightSegs() {\r\n        let { props } = this;\r\n        if (props.eventDrag && props.eventDrag.segs.length) { // messy check\r\n            return props.eventDrag.segs;\r\n        }\r\n        if (props.eventResize && props.eventResize.segs.length) { // messy check\r\n            return props.eventResize.segs;\r\n        }\r\n        return props.dateSelectionSegs;\r\n    }\r\n    getMirrorSegs() {\r\n        let { props } = this;\r\n        if (props.eventResize && props.eventResize.segs.length) { // messy check\r\n            return props.eventResize.segs;\r\n        }\r\n        return [];\r\n    }\r\n    renderFgSegs(col, segPlacements, todayRange, isForcedInvisible, isDragging, isResizing, isDateSelecting) {\r\n        let { context } = this;\r\n        let { eventSelection } = this.props;\r\n        let { framePositions } = this.state;\r\n        let defaultDisplayEventEnd = this.props.cells.length === 1; // colCnt === 1\r\n        let isMirror = isDragging || isResizing || isDateSelecting;\r\n        let nodes = [];\r\n        if (framePositions) {\r\n            for (let placement of segPlacements) {\r\n                let { seg } = placement;\r\n                let { instanceId } = seg.eventRange.instance;\r\n                let isVisible = placement.isVisible && !isForcedInvisible[instanceId];\r\n                let isAbsolute = placement.isAbsolute;\r\n                let left = '';\r\n                let right = '';\r\n                if (isAbsolute) {\r\n                    if (context.isRtl) {\r\n                        right = 0;\r\n                        left = framePositions.lefts[seg.lastCol] - framePositions.lefts[seg.firstCol];\r\n                    }\r\n                    else {\r\n                        left = 0;\r\n                        right = framePositions.rights[seg.firstCol] - framePositions.rights[seg.lastCol];\r\n                    }\r\n                }\r\n                /*\r\n                known bug: events that are force to be list-item but span multiple days still take up space in later columns\r\n                todo: in print view, for multi-day events, don't display title within non-start/end segs\r\n                */\r\n                nodes.push(createElement(\"div\", { className: 'fc-daygrid-event-harness' + (isAbsolute ? ' fc-daygrid-event-harness-abs' : ''), key: generateSegKey(seg), ref: isMirror ? null : this.segHarnessRefs.createRef(generateSegUid(seg)), style: {\r\n                        visibility: isVisible ? '' : 'hidden',\r\n                        marginTop: isAbsolute ? '' : placement.marginTop,\r\n                        top: isAbsolute ? placement.absoluteTop : '',\r\n                        left,\r\n                        right,\r\n                    } }, hasListItemDisplay(seg) ? (createElement(TableListItemEvent, Object.assign({ seg: seg, isDragging: isDragging, isSelected: instanceId === eventSelection, defaultDisplayEventEnd: defaultDisplayEventEnd }, getSegMeta(seg, todayRange)))) : (createElement(TableBlockEvent, Object.assign({ seg: seg, isDragging: isDragging, isResizing: isResizing, isDateSelecting: isDateSelecting, isSelected: instanceId === eventSelection, defaultDisplayEventEnd: defaultDisplayEventEnd }, getSegMeta(seg, todayRange))))));\r\n            }\r\n        }\r\n        return nodes;\r\n    }\r\n    renderFillSegs(segs, fillType) {\r\n        let { isRtl } = this.context;\r\n        let { todayRange } = this.props;\r\n        let { framePositions } = this.state;\r\n        let nodes = [];\r\n        if (framePositions) {\r\n            for (let seg of segs) {\r\n                let leftRightCss = isRtl ? {\r\n                    right: 0,\r\n                    left: framePositions.lefts[seg.lastCol] - framePositions.lefts[seg.firstCol],\r\n                } : {\r\n                    left: 0,\r\n                    right: framePositions.rights[seg.firstCol] - framePositions.rights[seg.lastCol],\r\n                };\r\n                nodes.push(createElement(\"div\", { key: buildEventRangeKey(seg.eventRange), className: \"fc-daygrid-bg-harness\", style: leftRightCss }, fillType === 'bg-event' ?\r\n                    createElement(BgEvent, Object.assign({ seg: seg }, getSegMeta(seg, todayRange))) :\r\n                    renderFill(fillType)));\r\n            }\r\n        }\r\n        return createElement(Fragment, {}, ...nodes);\r\n    }\r\n    updateSizing(isExternalSizingChange) {\r\n        let { props, state, frameElRefs } = this;\r\n        if (!props.forPrint &&\r\n            props.clientWidth !== null // positioning ready?\r\n        ) {\r\n            if (isExternalSizingChange) {\r\n                let frameEls = props.cells.map((cell) => frameElRefs.currentMap[cell.key]);\r\n                if (frameEls.length) {\r\n                    let originEl = this.rootElRef.current;\r\n                    let newPositionCache = new PositionCache(originEl, frameEls, true, // isHorizontal\r\n                    false);\r\n                    if (!state.framePositions || !state.framePositions.similarTo(newPositionCache)) {\r\n                        this.setState({\r\n                            framePositions: new PositionCache(originEl, frameEls, true, // isHorizontal\r\n                            false),\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n            const oldSegHeights = this.state.segHeights;\r\n            const newSegHeights = this.querySegHeights();\r\n            const limitByContentHeight = props.dayMaxEvents === true || props.dayMaxEventRows === true;\r\n            this.safeSetState({\r\n                // HACK to prevent oscillations of events being shown/hidden from max-event-rows\r\n                // Essentially, once you compute an element's height, never null-out.\r\n                // TODO: always display all events, as visibility:hidden?\r\n                segHeights: Object.assign(Object.assign({}, oldSegHeights), newSegHeights),\r\n                maxContentHeight: limitByContentHeight ? this.computeMaxContentHeight() : null,\r\n            });\r\n        }\r\n    }\r\n    querySegHeights() {\r\n        let segElMap = this.segHarnessRefs.currentMap;\r\n        let segHeights = {};\r\n        // get the max height amongst instance segs\r\n        for (let segUid in segElMap) {\r\n            let height = Math.round(segElMap[segUid].getBoundingClientRect().height);\r\n            segHeights[segUid] = Math.max(segHeights[segUid] || 0, height);\r\n        }\r\n        return segHeights;\r\n    }\r\n    computeMaxContentHeight() {\r\n        let firstKey = this.props.cells[0].key;\r\n        let cellEl = this.cellElRefs.currentMap[firstKey];\r\n        let fcContainerEl = this.fgElRefs.currentMap[firstKey];\r\n        return cellEl.getBoundingClientRect().bottom - fcContainerEl.getBoundingClientRect().top;\r\n    }\r\n    getCellEls() {\r\n        let elMap = this.cellElRefs.currentMap;\r\n        return this.props.cells.map((cell) => elMap[cell.key]);\r\n    }\r\n}\r\nTableRow.addStateEquality({\r\n    segHeights: isPropsEqual,\r\n});\r\nfunction buildMirrorPlacements(mirrorSegs, colPlacements) {\r\n    if (!mirrorSegs.length) {\r\n        return [];\r\n    }\r\n    let topsByInstanceId = buildAbsoluteTopHash(colPlacements); // TODO: cache this at first render?\r\n    return mirrorSegs.map((seg) => ({\r\n        seg,\r\n        isVisible: true,\r\n        isAbsolute: true,\r\n        absoluteTop: topsByInstanceId[seg.eventRange.instance.instanceId],\r\n        marginTop: 0,\r\n    }));\r\n}\r\nfunction buildAbsoluteTopHash(colPlacements) {\r\n    let topsByInstanceId = {};\r\n    for (let placements of colPlacements) {\r\n        for (let placement of placements) {\r\n            topsByInstanceId[placement.seg.eventRange.instance.instanceId] = placement.absoluteTop;\r\n        }\r\n    }\r\n    return topsByInstanceId;\r\n}\r\n\r\nclass TableRows extends DateComponent {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.splitBusinessHourSegs = memoize(splitSegsByRow);\r\n        this.splitBgEventSegs = memoize(splitAllDaySegsByRow);\r\n        this.splitFgEventSegs = memoize(splitSegsByRow);\r\n        this.splitDateSelectionSegs = memoize(splitSegsByRow);\r\n        this.splitEventDrag = memoize(splitInteractionByRow);\r\n        this.splitEventResize = memoize(splitInteractionByRow);\r\n        this.rowRefs = new RefMap();\r\n    }\r\n    render() {\r\n        let { props, context } = this;\r\n        let rowCnt = props.cells.length;\r\n        let businessHourSegsByRow = this.splitBusinessHourSegs(props.businessHourSegs, rowCnt);\r\n        let bgEventSegsByRow = this.splitBgEventSegs(props.bgEventSegs, rowCnt);\r\n        let fgEventSegsByRow = this.splitFgEventSegs(props.fgEventSegs, rowCnt);\r\n        let dateSelectionSegsByRow = this.splitDateSelectionSegs(props.dateSelectionSegs, rowCnt);\r\n        let eventDragByRow = this.splitEventDrag(props.eventDrag, rowCnt);\r\n        let eventResizeByRow = this.splitEventResize(props.eventResize, rowCnt);\r\n        // for DayGrid view with many rows, force a min-height on cells so doesn't appear squished\r\n        // choose 7 because a month view will have max 6 rows\r\n        let cellMinHeight = (rowCnt >= 7 && props.clientWidth) ?\r\n            props.clientWidth / context.options.aspectRatio / 6 :\r\n            null;\r\n        return (createElement(NowTimer, { unit: \"day\" }, (nowDate, todayRange) => (createElement(Fragment, null, props.cells.map((cells, row) => (createElement(TableRow, { ref: this.rowRefs.createRef(row), key: cells.length\r\n                ? cells[0].date.toISOString() /* best? or put key on cell? or use diff formatter? */\r\n                : row // in case there are no cells (like when resource view is loading)\r\n            , showDayNumbers: rowCnt > 1, showWeekNumbers: props.showWeekNumbers, todayRange: todayRange, dateProfile: props.dateProfile, cells: cells, renderIntro: props.renderRowIntro, businessHourSegs: businessHourSegsByRow[row], eventSelection: props.eventSelection, bgEventSegs: bgEventSegsByRow[row], fgEventSegs: fgEventSegsByRow[row], dateSelectionSegs: dateSelectionSegsByRow[row], eventDrag: eventDragByRow[row], eventResize: eventResizeByRow[row], dayMaxEvents: props.dayMaxEvents, dayMaxEventRows: props.dayMaxEventRows, clientWidth: props.clientWidth, clientHeight: props.clientHeight, cellMinHeight: cellMinHeight, forPrint: props.forPrint })))))));\r\n    }\r\n    componentDidMount() {\r\n        this.registerInteractiveComponent();\r\n    }\r\n    componentDidUpdate() {\r\n        // for if started with zero cells\r\n        this.registerInteractiveComponent();\r\n    }\r\n    registerInteractiveComponent() {\r\n        if (!this.rootEl) {\r\n            // HACK: need a daygrid wrapper parent to do positioning\r\n            // NOTE: a daygrid resource view w/o resources can have zero cells\r\n            const firstCellEl = this.rowRefs.currentMap[0].getCellEls()[0];\r\n            const rootEl = firstCellEl ? firstCellEl.closest('.fc-daygrid-body') : null;\r\n            if (rootEl) {\r\n                this.rootEl = rootEl;\r\n                this.context.registerInteractiveComponent(this, {\r\n                    el: rootEl,\r\n                    isHitComboAllowed: this.props.isHitComboAllowed,\r\n                });\r\n            }\r\n        }\r\n    }\r\n    componentWillUnmount() {\r\n        if (this.rootEl) {\r\n            this.context.unregisterInteractiveComponent(this);\r\n            this.rootEl = null;\r\n        }\r\n    }\r\n    // Hit System\r\n    // ----------------------------------------------------------------------------------------------------\r\n    prepareHits() {\r\n        this.rowPositions = new PositionCache(this.rootEl, this.rowRefs.collect().map((rowObj) => rowObj.getCellEls()[0]), // first cell el in each row. TODO: not optimal\r\n        false, true);\r\n        this.colPositions = new PositionCache(this.rootEl, this.rowRefs.currentMap[0].getCellEls(), // cell els in first row\r\n        true, // horizontal\r\n        false);\r\n    }\r\n    queryHit(positionLeft, positionTop) {\r\n        let { colPositions, rowPositions } = this;\r\n        let col = colPositions.leftToIndex(positionLeft);\r\n        let row = rowPositions.topToIndex(positionTop);\r\n        if (row != null && col != null) {\r\n            let cell = this.props.cells[row][col];\r\n            return {\r\n                dateProfile: this.props.dateProfile,\r\n                dateSpan: Object.assign({ range: this.getCellRange(row, col), allDay: true }, cell.extraDateSpan),\r\n                dayEl: this.getCellEl(row, col),\r\n                rect: {\r\n                    left: colPositions.lefts[col],\r\n                    right: colPositions.rights[col],\r\n                    top: rowPositions.tops[row],\r\n                    bottom: rowPositions.bottoms[row],\r\n                },\r\n                layer: 0,\r\n            };\r\n        }\r\n        return null;\r\n    }\r\n    getCellEl(row, col) {\r\n        return this.rowRefs.currentMap[row].getCellEls()[col]; // TODO: not optimal\r\n    }\r\n    getCellRange(row, col) {\r\n        let start = this.props.cells[row][col].date;\r\n        let end = addDays(start, 1);\r\n        return { start, end };\r\n    }\r\n}\r\nfunction splitAllDaySegsByRow(segs, rowCnt) {\r\n    return splitSegsByRow(segs.filter(isSegAllDay), rowCnt);\r\n}\r\nfunction isSegAllDay(seg) {\r\n    return seg.eventRange.def.allDay;\r\n}\r\n\r\nclass Table extends DateComponent {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.elRef = createRef();\r\n        this.needsScrollReset = false;\r\n    }\r\n    render() {\r\n        let { props } = this;\r\n        let { dayMaxEventRows, dayMaxEvents, expandRows } = props;\r\n        let limitViaBalanced = dayMaxEvents === true || dayMaxEventRows === true;\r\n        // if rows can't expand to fill fixed height, can't do balanced-height event limit\r\n        // TODO: best place to normalize these options?\r\n        if (limitViaBalanced && !expandRows) {\r\n            limitViaBalanced = false;\r\n            dayMaxEventRows = null;\r\n            dayMaxEvents = null;\r\n        }\r\n        let classNames = [\r\n            'fc-daygrid-body',\r\n            limitViaBalanced ? 'fc-daygrid-body-balanced' : 'fc-daygrid-body-unbalanced',\r\n            expandRows ? '' : 'fc-daygrid-body-natural', // will height of one row depend on the others?\r\n        ];\r\n        return (createElement(\"div\", { ref: this.elRef, className: classNames.join(' '), style: {\r\n                // these props are important to give this wrapper correct dimensions for interactions\r\n                // TODO: if we set it here, can we avoid giving to inner tables?\r\n                width: props.clientWidth,\r\n                minWidth: props.tableMinWidth,\r\n            } },\r\n            createElement(\"table\", { role: \"presentation\", className: \"fc-scrollgrid-sync-table\", style: {\r\n                    width: props.clientWidth,\r\n                    minWidth: props.tableMinWidth,\r\n                    height: expandRows ? props.clientHeight : '',\r\n                } },\r\n                props.colGroupNode,\r\n                createElement(\"tbody\", { role: \"presentation\" },\r\n                    createElement(TableRows, { dateProfile: props.dateProfile, cells: props.cells, renderRowIntro: props.renderRowIntro, showWeekNumbers: props.showWeekNumbers, clientWidth: props.clientWidth, clientHeight: props.clientHeight, businessHourSegs: props.businessHourSegs, bgEventSegs: props.bgEventSegs, fgEventSegs: props.fgEventSegs, dateSelectionSegs: props.dateSelectionSegs, eventSelection: props.eventSelection, eventDrag: props.eventDrag, eventResize: props.eventResize, dayMaxEvents: dayMaxEvents, dayMaxEventRows: dayMaxEventRows, forPrint: props.forPrint, isHitComboAllowed: props.isHitComboAllowed })))));\r\n    }\r\n    componentDidMount() {\r\n        this.requestScrollReset();\r\n    }\r\n    componentDidUpdate(prevProps) {\r\n        if (prevProps.dateProfile !== this.props.dateProfile) {\r\n            this.requestScrollReset();\r\n        }\r\n        else {\r\n            this.flushScrollReset();\r\n        }\r\n    }\r\n    requestScrollReset() {\r\n        this.needsScrollReset = true;\r\n        this.flushScrollReset();\r\n    }\r\n    flushScrollReset() {\r\n        if (this.needsScrollReset &&\r\n            this.props.clientWidth // sizes computed?\r\n        ) {\r\n            const subjectEl = getScrollSubjectEl(this.elRef.current, this.props.dateProfile);\r\n            if (subjectEl) {\r\n                const originEl = subjectEl.closest('.fc-daygrid-body');\r\n                const scrollEl = originEl.closest('.fc-scroller');\r\n                const scrollTop = subjectEl.getBoundingClientRect().top -\r\n                    originEl.getBoundingClientRect().top;\r\n                scrollEl.scrollTop = scrollTop ? (scrollTop + 1) : 0; // overcome border\r\n            }\r\n            this.needsScrollReset = false;\r\n        }\r\n    }\r\n}\r\nfunction getScrollSubjectEl(containerEl, dateProfile) {\r\n    let el;\r\n    if (dateProfile.currentRangeUnit.match(/year|month/)) {\r\n        el = containerEl.querySelector(`[data-date=\"${formatIsoMonthStr(dateProfile.currentDate)}-01\"]`);\r\n        // even if view is month-based, first-of-month might be hidden...\r\n    }\r\n    if (!el) {\r\n        el = containerEl.querySelector(`[data-date=\"${formatDayString(dateProfile.currentDate)}\"]`);\r\n        // could still be hidden if an interior-view hidden day\r\n    }\r\n    return el;\r\n}\r\n\r\nclass DayTableSlicer extends Slicer {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.forceDayIfListItem = true;\r\n    }\r\n    sliceRange(dateRange, dayTableModel) {\r\n        return dayTableModel.sliceRange(dateRange);\r\n    }\r\n}\r\n\r\nclass DayTable extends DateComponent {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.slicer = new DayTableSlicer();\r\n        this.tableRef = createRef();\r\n    }\r\n    render() {\r\n        let { props, context } = this;\r\n        return (createElement(Table, Object.assign({ ref: this.tableRef }, this.slicer.sliceProps(props, props.dateProfile, props.nextDayThreshold, context, props.dayTableModel), { dateProfile: props.dateProfile, cells: props.dayTableModel.cells, colGroupNode: props.colGroupNode, tableMinWidth: props.tableMinWidth, renderRowIntro: props.renderRowIntro, dayMaxEvents: props.dayMaxEvents, dayMaxEventRows: props.dayMaxEventRows, showWeekNumbers: props.showWeekNumbers, expandRows: props.expandRows, headerAlignElRef: props.headerAlignElRef, clientWidth: props.clientWidth, clientHeight: props.clientHeight, forPrint: props.forPrint })));\r\n    }\r\n}\r\n\r\nclass DayTableView extends TableView {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.buildDayTableModel = memoize(buildDayTableModel);\r\n        this.headerRef = createRef();\r\n        this.tableRef = createRef();\r\n        // can't override any lifecycle methods from parent\r\n    }\r\n    render() {\r\n        let { options, dateProfileGenerator } = this.context;\r\n        let { props } = this;\r\n        let dayTableModel = this.buildDayTableModel(props.dateProfile, dateProfileGenerator);\r\n        let headerContent = options.dayHeaders && (createElement(DayHeader, { ref: this.headerRef, dateProfile: props.dateProfile, dates: dayTableModel.headerDates, datesRepDistinctDays: dayTableModel.rowCnt === 1 }));\r\n        let bodyContent = (contentArg) => (createElement(DayTable, { ref: this.tableRef, dateProfile: props.dateProfile, dayTableModel: dayTableModel, businessHours: props.businessHours, dateSelection: props.dateSelection, eventStore: props.eventStore, eventUiBases: props.eventUiBases, eventSelection: props.eventSelection, eventDrag: props.eventDrag, eventResize: props.eventResize, nextDayThreshold: options.nextDayThreshold, colGroupNode: contentArg.tableColGroupNode, tableMinWidth: contentArg.tableMinWidth, dayMaxEvents: options.dayMaxEvents, dayMaxEventRows: options.dayMaxEventRows, showWeekNumbers: options.weekNumbers, expandRows: !props.isHeightAuto, headerAlignElRef: this.headerElRef, clientWidth: contentArg.clientWidth, clientHeight: contentArg.clientHeight, forPrint: props.forPrint }));\r\n        return options.dayMinWidth\r\n            ? this.renderHScrollLayout(headerContent, bodyContent, dayTableModel.colCnt, options.dayMinWidth)\r\n            : this.renderSimpleLayout(headerContent, bodyContent);\r\n    }\r\n}\r\nfunction buildDayTableModel(dateProfile, dateProfileGenerator) {\r\n    let daySeries = new DaySeriesModel(dateProfile.renderRange, dateProfileGenerator);\r\n    return new DayTableModel(daySeries, /year|month|week/.test(dateProfile.currentRangeUnit));\r\n}\r\n\r\nclass TableDateProfileGenerator extends DateProfileGenerator {\r\n    // Computes the date range that will be rendered\r\n    buildRenderRange(currentRange, currentRangeUnit, isRangeAllDay) {\r\n        let renderRange = super.buildRenderRange(currentRange, currentRangeUnit, isRangeAllDay);\r\n        let { props } = this;\r\n        return buildDayTableRenderRange({\r\n            currentRange: renderRange,\r\n            snapToWeek: /^(year|month)$/.test(currentRangeUnit),\r\n            fixedWeekCount: props.fixedWeekCount,\r\n            dateEnv: props.dateEnv,\r\n        });\r\n    }\r\n}\r\nfunction buildDayTableRenderRange(props) {\r\n    let { dateEnv, currentRange } = props;\r\n    let { start, end } = currentRange;\r\n    let endOfWeek;\r\n    // year and month views should be aligned with weeks. this is already done for week\r\n    if (props.snapToWeek) {\r\n        start = dateEnv.startOfWeek(start);\r\n        // make end-of-week if not already\r\n        endOfWeek = dateEnv.startOfWeek(end);\r\n        if (endOfWeek.valueOf() !== end.valueOf()) {\r\n            end = addWeeks(endOfWeek, 1);\r\n        }\r\n    }\r\n    // ensure 6 weeks\r\n    if (props.fixedWeekCount) {\r\n        // TODO: instead of these date-math gymnastics (for multimonth view),\r\n        // compute dateprofiles of all months, then use start of first and end of last.\r\n        let lastMonthRenderStart = dateEnv.startOfWeek(dateEnv.startOfMonth(addDays(currentRange.end, -1)));\r\n        let rowCnt = Math.ceil(// could be partial weeks due to hiddenDays\r\n        diffWeeks(lastMonthRenderStart, end));\r\n        end = addWeeks(end, 6 - rowCnt);\r\n    }\r\n    return { start, end };\r\n}\r\n\r\nvar css_248z = \":root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:\\\"\\\";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:\\\"\\\";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}\";\r\ninjectStyles(css_248z);\r\n\r\nexport { DayTableView as DayGridView, DayTable, DayTableSlicer, Table, TableDateProfileGenerator, TableRows, TableView, buildDayTableModel, buildDayTableRenderRange };\r\n","import { createPlugin } from '@fullcalendar/core/index.js';\r\nimport { DayGridView as DayTableView, TableDateProfileGenerator } from './internal.js';\r\nimport '@fullcalendar/core/internal.js';\r\nimport '@fullcalendar/core/preact.js';\r\n\r\nvar index = createPlugin({\r\n    name: '@fullcalendar/daygrid',\r\n    initialView: 'dayGridMonth',\r\n    views: {\r\n        dayGrid: {\r\n            component: DayTableView,\r\n            dateProfileGeneratorClass: TableDateProfileGenerator,\r\n        },\r\n        dayGridDay: {\r\n            type: 'dayGrid',\r\n            duration: { days: 1 },\r\n        },\r\n        dayGridWeek: {\r\n            type: 'dayGrid',\r\n            duration: { weeks: 1 },\r\n        },\r\n        dayGridMonth: {\r\n            type: 'dayGrid',\r\n            duration: { months: 1 },\r\n            fixedWeekCount: true,\r\n        },\r\n        dayGridYear: {\r\n            type: 'dayGrid',\r\n            duration: { years: 1 },\r\n        },\r\n    },\r\n});\r\n\r\nexport { index as default };\r\n"],"mappings":"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"}